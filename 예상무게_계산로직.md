# 예상 무게 계산 로직 설명서

## 개요
이 문서는 성신컴퍼니 통관비 계산 툴의 예상 무게 기반 배송비 및 세금 계산 로직을 설명합니다.

---

## 1. 배송비 계산 로직 (과세 운임)

### 1.1 기본 원칙
- **0.5kg 단위 올림 처리**: 입력된 무게를 0.5kg 단위로 올림하여 계산
- **계단식 요금제**: 0.5kg 단위로 배송비가 증가

### 1.2 계산 공식

```javascript
calculateShippingCost(weight: number): number
```

#### 단계별 계산 과정

1. **입력값 검증**
   ```javascript
   if (weight <= 0) return 0;
   ```

2. **0.5kg 단위 올림 처리**
   ```javascript
   const roundedWeight = Math.ceil(weight * 2) / 2;
   ```
   - 예시:
     - 0.1kg → 0.5kg (올림)
     - 0.6kg → 1.0kg (올림)
     - 1.2kg → 1.5kg (올림)
     - 1.5kg → 1.5kg (유지)
     - 2.0kg → 2.0kg (유지)

3. **배송비 계산**
   ```javascript
   const baseCost = 5800;  // 기본 배송비 (0.5kg 기준)
   const additionalCost = (roundedWeight - 0.5) * 1000;
   return baseCost + Math.max(0, additionalCost);
   ```

### 1.3 배송비 표

| 무게 (kg) | 올림된 무게 | 계산식 | 배송비 (원) |
|-----------|------------|--------|------------|
| 0.1 ~ 0.5 | 0.5 | 5,800 + (0.5 - 0.5) × 1,000 | 5,800 |
| 0.6 ~ 1.0 | 1.0 | 5,800 + (1.0 - 0.5) × 1,000 | 6,300 |
| 1.1 ~ 1.5 | 1.5 | 5,800 + (1.5 - 0.5) × 1,000 | 6,800 |
| 1.6 ~ 2.0 | 2.0 | 5,800 + (2.0 - 0.5) × 1,000 | 7,300 |
| 2.1 ~ 2.5 | 2.5 | 5,800 + (2.5 - 0.5) × 1,000 | 7,800 |
| ... | ... | ... | ... |

**공식**: 배송비 = 5,800 + (올림된 무게 - 0.5) × 1,000

---

## 2. 세금 계산 로직

### 2.1 계산 흐름도

```
입력값
├─ 매입 원가 (¥)
├─ 적용 환율 (₩)
├─ 예상 무게 (kg)
└─ 카테고리 (관세율, 부가세율)

↓

1단계: 물건 가격 계산
물건 가격 = 매입 원가 × 적용 환율

↓

2단계: 배송비 계산 (과세 운임)
배송비 = calculateShippingCost(예상 무게)

↓

3단계: 과세표준 계산
과세표준 = 물건 가격 + 배송비

↓

4단계: 관세 계산
관세 = 과세표준 × 관세율 (카테고리별)

↓

5단계: 부가세 계산
부가세 = (과세표준 + 관세) × 부가세율 (10%)

↓

6단계: 총 납부 세액
총 납부 세액 = 관세 + 부가세
```

### 2.2 계산 함수

```javascript
calculateTax(
  purchasePrice: number,    // 매입 원가 (위안)
  exchangeRate: number,      // 적용 환율 (원)
  weight: number,            // 예상 무게 (kg)
  dutyRate: number,          // 관세율 (카테고리별)
  vatRate: number            // 부가세율 (0.10 = 10%)
)
```

### 2.3 계산 예시

#### 예시 1: 의류 (관세율 13%, 부가세율 10%)
- 매입 원가: 100위안
- 적용 환율: 190원
- 예상 무게: 1.2kg

**계산 과정:**
1. 물건 가격 = 100 × 190 = 19,000원
2. 올림된 무게 = 1.5kg
3. 배송비 = 5,800 + (1.5 - 0.5) × 1,000 = 6,800원
4. 과세표준 = 19,000 + 6,800 = 25,800원
5. 관세 = 25,800 × 0.13 = 3,354원
6. 부가세 = (25,800 + 3,354) × 0.10 = 2,915원
7. 총 납부 세액 = 3,354 + 2,915 = 6,269원

#### 예시 2: 가전제품 (관세율 0%, 부가세율 10%)
- 매입 원가: 500위안
- 적용 환율: 190원
- 예상 무게: 2.3kg

**계산 과정:**
1. 물건 가격 = 500 × 190 = 95,000원
2. 올림된 무게 = 2.5kg
3. 배송비 = 5,800 + (2.5 - 0.5) × 1,000 = 7,800원
4. 과세표준 = 95,000 + 7,800 = 102,800원
5. 관세 = 102,800 × 0.00 = 0원
6. 부가세 = (102,800 + 0) × 0.10 = 10,280원
7. 총 납부 세액 = 0 + 10,280 = 10,280원

---

## 3. 카테고리별 관세율

| 대분류 | 소분류 | 관세율 | 부가세율 |
|--------|--------|--------|----------|
| 의류/패션 | 일반 의류 (티셔츠/바지/아우터) | 13% | 10% |
| 의류/패션 | 신발/운동화 | 13% | 10% |
| 의류/패션 | 가방/지갑/액세서리 | 8% | 10% |
| 의류/패션 | 선글라스 | 8% | 10% |
| 의류/패션 | 시계/보석/귀금속 | 8% | 10% |
| 뷰티/화장품 | 화장품/향수 | 8% | 10% |
| 가전/디지털 | 컴퓨터/노트북/태블릿 | 0% | 10% |
| 가전/디지털 | 스마트워치/이어폰 | 0% | 10% |
| 가전/디지털 | 소형가전/조명/LED | 8% | 10% |
| 가전/디지털 | CD/MP3/DVD/스피커 | 8% | 10% |
| 가전/디지털 | 디지털 카메라 | 8% | 10% |
| 가전/디지털 | 공기청정기 | 8% | 10% |
| 가전/디지털 | 전동휠/킥보드 | 8% | 10% |
| 생활/주방/가구 | 주방식기/조리도구 | 8% | 10% |
| 생활/주방/가구 | 플라스틱 정리/수납함 | 6.5% | 10% |
| 생활/주방/가구 | 침구/커튼/러그 | 13% | 10% |
| 생활/주방/가구 | 목재 가구 | 0% | 10% |
| 생활/주방/가구 | 커피머신 | 8% | 10% |
| 생활/주방/가구 | 유모차 | 8% | 10% |
| 문구/완구/취미 | 일반 완구/장난감 | 8% | 10% |
| 문구/완구/취미 | 문구류/캠핑/스포츠 | 8% | 10% |
| 스포츠/레저 | 캠핑장비 | 8% | 10% |
| 스포츠/레저 | 텐트 | 8% | 10% |
| 스포츠/레저 | 골프채 | 8% | 10% |
| 스포츠/레저 | 자전거(부품) | 8% | 10% |
| 건강/식품 | 건강보조식품 | 8% | 10% |
| 건강/식품 | 식품(과자/시리얼/젤리 등) | 8% | 10% |
| 반려동물 | 반려동물 의류 | 13% | 10% |
| 반려동물 | 반려동물 용품/장난감 | 8% | 10% |

---

## 4. 중요 사항

### 4.1 CIF 기준 계산
- **CIF (Cost, Insurance, Freight)**: 관세청의 세금 계산 기준
- 과세표준 = 물건 가격 + 배송비 (과세 운임)
- 배송비가 세금 계산에 포함됨

### 4.2 무게의 중요성
- 무게가 증가할수록 배송비가 증가
- 배송비가 증가하면 과세표준이 증가
- 과세표준이 증가하면 관세와 부가세도 증가
- **결론**: 무게를 줄이면 세금도 줄어듭니다

### 4.3 계산 정확도
- 무게는 0.5kg 단위로 올림 처리
- 배송비는 정수로 반올림
- 세금은 정수로 반올림 (Intl.NumberFormat 사용)

---

## 5. 코드 위치

- **파일**: `components/Hero.tsx`
- **배송비 계산 함수**: `calculateShippingCost()` (33-42줄)
- **세금 계산 함수**: `calculateTax()` (44-67줄)
- **카테고리 데이터**: `categoryData` (6-31줄)

---

## 6. 참고사항

- 이 계산 로직은 성신컴퍼니의 해운 배송비 기준을 따릅니다
- 실제 통관 시에는 추가 비용이 발생할 수 있습니다
- 환율 변동에 따라 계산 결과가 달라질 수 있습니다
- 카테고리별 관세율은 실제 관세청 기준을 반영합니다
